<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.etr.mapper.AccessTokenMapper">
    <resultMap id="accessToken" type="com.etr.model.User">
        <result column="id" property="id"/>
        <result column="access_token" property="accessToken"/>
        <result column="openid" property="openId"/>
        <result column="create_time" property="createTime"/>
        <result column="update_time" property="updateTime"/>
    </resultMap>


    <select id="getAccessTokenbyOpenId" parameterType="String" resultMap="accessToken">
        SELECT * FROM access_token  WHERE  openid  = #{openId}
    </select>

    <insert id="addAccessToken" parameterType="com.etr.model.AccessToken" useGeneratedKeys="true" keyProperty="id">
        INSERT INTO access_token (access_token,openid) VALUES (#{accessToken},#{openId})
    </insert>

    <update id="updateAccessToken">
        UPDATE access_token SET
        access_token=#{accessToken}
        WHERE
        openid=#{openId}
    </update>

</mapper>